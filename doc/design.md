# 追加仕様
ゲームオーナーがファクトリーをデプロイする
ゲームプレイヤーがゲームを立ち上げる
## ゲーム
- ゲームを立ち上げたプレイヤーは1番目のプレイヤーになる
- 複数並行して立ち上げられる
- 各ゲームはゲームID(uint)によって識別される
- ゲームIDはゲーム生成のシーケンシャル
- マスは16*16マス
- STANDBY,OPEN,CLOSEの状態がある
  - STANDBY
    - ゲーム立ち上げからプレイヤーが二人揃うまで
  - OPEN
    - プレイヤーがそろってからCLOSEまで
  - CLOSE
    - ゲームに決着がつくまたはマスが埋まる
- エントリー手数料は0.01ETH（両プレイヤー）
- どちらかが勝利した場合、勝者に0.015ETHと100GMK、ファクトリーオーナーに0.005ETH渡る
- 引き分けた場合ファクトリーオーナーに0.02ETH渡る

## GMKトークン
- ERC20準拠トークン
- シンボル名
  - GOMOKU Token
- ティッカー
  - GMK
- デシマル
  - 18

## アクター
- オーナー
  - ファクトリーの発行主体、管理者
- プレイヤー
  - ゲームのプレイヤー
- ファクトリー
  - ゲームを生成・保持する
  - ETHを送金する
  - GMKトークンを送金する
- ゲーム
  - ゲームの情報（プレイヤー、プレイ状態、ボード）をもつ
- ボード
  - ボードに配置された石の情報をもつ
- ジャッジ
  - ボード情報をもとに勝敗・引き分けを判定する

## ユースケース

## UI
以下のページ・ボタンがある
- ゲーム一覧ページ
  - ゲーム詳細ページ遷移
  - ゲーム立ち上げボタン
  - 各ゲームの進行状況（STANDBY, OPEN, CLOSE（WIN（WINNER） or DRAW））を確認できる
- ゲーム詳細ページ
  - ボード・ゲーム状態が表示される（subgraphで集計）
  - STANDBY状態の時、ゲームエントリーボタン表示
  - OPEN状態でエントリー済みで自分のターンの時ボードに石を置ける
  - 自分のエントリーしたゲームで投了できる(V2)

# ユースケース
- オーナー
  - ファクトリーを立ち上げる
- ファクトリー
  - ゲームを生成する
  - ゲームを保持する
  - ゲームの状態を更新する
  - ETHを送金する
  - GMKトークンを送金する
- プレイヤー
  - ゲームを立ち上げる
  - エントリーする
  - プレイする
  - 投了する
- ボード
  - 状態を保持する
  - 状態を更新する
- ジャッジ
  - ボードの状態を判定する
- 誰でも
  - バージョンを確認する `version`

# API一覧
- オーナー
  - ファクトリーを立ち上げる `deploy`
- ファクトリー
  - ゲームを生成する `createGame`
  - ゲームを保持する
  - ゲームの状態を更新する `updateGame`
- プレイヤー
  - ゲームを立ち上げる `createGame`
  - エントリーする `entryGame`
  - プレイする `play`
  - 投了する `resign`
- ボード
  - 状態を保持する
  - 状態を更新する `updateBoard`
- ジャッジ
  - ボードの状態を判定する `judge`
- 誰でも
  - バージョンを確認する `version`